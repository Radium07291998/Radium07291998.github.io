<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Portfolios - Radium's Website
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="Radium's Website" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
 
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site: ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="resume.html">Resume</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; Radium's Website</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="resume.html">Resume</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="Portfolios.html">Portfolios</a></li>
        
            <li><a href="Literature%20Reviews.html">Literature Reviews</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="PSD2UMG.html">
                
                  <h1>PSD2UMG</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2><a id="1-introduction-the-process-to-create-art-assets-in-mobile-development" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Introduction: the process to create art assets in mobile development</h2>
<p>User Interface (UI) is an important part of any game, and it is the medium through which the game and the player interact. UI enables the conversion and transfer of game-related information from the game's internal form to a form that is understandable and acceptable to the player. In the game field, UI is referred to as UI in Unity 3D and UMG in UE.</p>
<p>The design of a game's user interface (UI) is an important part of the development process. There are several key roles involved in this process, including game planning, interaction design, 2D art design, refactoring, and client application. Each role takes the output of the previous role and produces an output for the next role, in order to create a UI that can be presented to the public.</p>
<ol>
<li>Planning the game. This involves deciding what information should be displayed.</li>
<li>Designing the user interface. This involves creating the look and feel of the game.</li>
<li>Creating 2D art for the game. This involves creating the visual elements of the game.</li>
<li>Refactoring the game. This involves making sure the game works properly by connecting the game logic to the user interface.</li>
<li>Programming the game. This involves connecting the game logic to the user interface and displaying the necessary business information.</li>
</ol>
<h2><a id="2-motivation-maximize-efficiency-and-create-top-notch-art-assets-without-repeating-work" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Motivation: maximize efficiency and create top-notch art assets without repeating work</h2>
<p>When creating 2D artwork for a game project, the process can be broken down into several steps. These steps include exporting the artwork, cutting it into layers, importing the layers into the game project, retrieving the image resources in the project, and exporting it to the client application. This process is extremely labour-intensive and has no room for technological upgrading. Additionally, the artwork requires the maintenance of a list of resources already available to the project, which can lead to resource redundancy. Manual restoration is also prone to deviations in detail that do not match the art design. For example, if the resources are scaled up by 200%, it can be difficult to distinguish between them.</p>
<p>Many people who create mobile games face similar challenges. To address these issues, I looked into the workflow solutions available today. There are various approaches to consider.</p>
<h3><a id="2-1-detailed-labeling-of-streams" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.1 Detailed labeling of streams</h3>
<p>This diagram provides a detailed overview of the resources and their locations in relation to each other. It was created as a result of a dispute during development over the quality of the user interface restoration. This approach was very time consuming, taking three times as long as creating the actual visuals. It was like putting the cart before the horse.<br />
<figure><img src="media/16682382868197/16697058644619.jpg" alt="Due to confidentiality reasons, this diagram is very blurred, just note the complex structure of this diagram" /><figcaption>Due to confidentiality reasons, this diagram is very blurred, just note the complex structure of this diagram<figcaption></figure></p>
<h3><a id="2-2-a-solution-for-transforming-photoshop-designs-into-unity-user-interfaces" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.2 A solution for transforming Photoshop designs into Unity user interfaces.</h3>
<p>PSD2UI is a plugin available on the Unity Asset Store. It helps to recover layers in Unity by parsing the names of the layers in the PSD. However, this approach has two main issues. Firstly, the artist must have a clear understanding of the exact location of all resources in the project. Secondly, the artist must maintain the PSD layer naming. Additionally, the hierarchy defined by the artist may not be directly usable by the program, which may still need to adjust the hierarchy to the logic at a later stage. This is why PSD2UI plugins have not become popular.<br />
<figure><img src="media/16682382868197/16697061463635.jpg" alt="" /></figure></p>
<h3><a id="2-3-image-matching" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3  Image matching</h3>
<p>Image matching is a technique used to compare images. It can be used in game development, but it has some drawbacks. Template matching is slow and can take a long time to complete. SIFT feature point matching relies heavily on the parameters used, and the results may not be consistent across different images. Additionally, the results may not be universal when images have been transformed.</p>
<h3><a id="2-4-section-summary" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.4 Section summary</h3>
<p>We are looking for a solution to make the UI recovery process more efficient. This solution would automate much of the tedious and repetitive work, while also providing a high-quality result. Compared to traditional workflows, this solution would drastically reduce the amount of time needed to complete the process, while also ensuring that the artwork is restored accurately and that there are no extra resources in the project.</p>
<h2><a id="3-solution" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Solution</h2>
<p>When creating artwork for a project, the resources may be changed in some way. This transformation makes it difficult to use traditional image recognition and image retrieval to match the resources used in the game. To solve this problem, we developed a perceptual hash to identify the mapping relationships between the original and transformed resources.</p>
<h3><a id="3-1-perceptual-hash" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1 Perceptual hash</h3>
<h4><a id="3-1-1-traditional-hashing" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1.1 Traditional hashing</h4>
<p>Hashing is a technique used in traditional cryptography to create a fixed-length output for any given input. This output, known as a hash, is a digestible representation of the original input. Traditional cryptography is designed to be one-way and collision-resistant, meaning that the original input cannot be inferred from the hash and that two different inputs cannot produce the same hash. This sensitivity to bit changes in the input data means that even a small change in the input can result in a seemingly random change in the output. This makes traditional cryptographic hashing algorithms unsuitable for digital image retrieval and matching, as operations such as changes in image format, scaling, rotation, or resolution can lead to drastic changes in the hash value, even though the content of the image remains the same.</p>
<p>Here are the results of traditional hash functions:</p>
<table>
<thead>
<tr>
<th>Original Value</th>
<th>Hash Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>FatherAndMotherILoveYou</td>
<td>d1f3bb50ec8144adbc23fda1ba709dbb</td>
</tr>
<tr>
<td>FatherAndMotherILoveyou</td>
<td>4e8c13234d9aa2a8b45b8d411fb9ff39</td>
</tr>
<tr>
<td>fatherAndMotherILoveYou</td>
<td>6bcf71c8b5c9395f70c18393b4284202</td>
</tr>
</tbody>
</table>
<p>The hash of the file cannot be used to find the resources of the game easily, because the resources have been changed in various ways. If the hash is used directly, it is likely that the matching rate will be low or there may not be a match at all.</p>
<h4><a id="3-1-2-perceptual-hashing" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1.2 Perceptual hashing</h4>
<p>Perceptual hashing is a technique that uses the principles of cryptography to create a fixed-length binary sequence, called a perceptual hash value, for a given digital image. This value is designed to remain the same or vary within a small threshold, even if the image format changes, as long as the content information stays the same. This allows for the comparison of two images to determine if they are perceptually similar. The concept was first proposed in 2001 by Ton Kalker in a paper on Digital Watermarking. [TODO add Reference]</p>
<p>Our solution proposes a hashing algorithm called Mix-Hashing which is based on traditional perceptual hash functions and structural information. It is supplemented by luminance and channel components, making it robust to image scaling, rotation, nine-pattern stretching, and three-pattern stretching which are common features of in-game resources.</p>
<p><figure><img src="media/16682382868197/16697088436390.jpg" alt="" /></figure></p>
<h4><a id="3-1-3-structure-based-perceptual-hash-algorithm" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1.3 Structure-based perceptual hash algorithm</h4>
<p>The AVG-Hashing algorithm is a computational method that quickly generates a grayscale average based on statistical features of an image. This process only requires a few pixels to be extracted, making it a very efficient way to generate a perceptual hash. AVG-Hashing is a process for generating a unique perceptual hash sequence from an image. It involves normalizing the image to an 8*8 size, graying out the thumbnail, calculating the average grayscale value of all pixels, extracting features for all pixels and binarizing them, and finally generating the perceptual hash sequence. The sequence is collision-resistant, meaning it is unique to the image.</p>
<p>TO BE CONTINUE</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">02/28/2022</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Portfolios.html'>Portfolios</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="Realtime_Glass_Rendering.html">
                
                  <h1>Realtime Glass Rendering</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2><a id="1-abstract" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Abstract</h2>
<p>Due to device performance and calculation limits, we cannot do physical simulation (refraction and reflection) realtime, and most glass materials rendering is basically offline. Hence I come out a very low-overhead way to implement the glass material in Unity3D. This solution is very flexible and portable. It can be applied to PBR only by replacing the light reflection and environment reflection.</p>
<h2><a id="2-motivation-low-cost-glass-material-rendering-shader" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Motivation: Low-cost glass material rendering shader</h2>
<p>Making the glass materials in mobile development  is difficult, because the glass contains many features: reflection, refraction, thickness, etc. These characteristics require abundant calculations when rendering in real-time, however due to device performance limits,  even in some console game, the render effect is not ideal. Here are  realtime screenshots from some console game, including <em>Final Fantasy VII Remake</em> and <em>Red Dead Redemption 2</em>. As we can see in these screenshots, these glasses are not perfect - they miss some refraction features.<br />
<figure><img src="media/16690463295788/16690906338748.jpg" alt="Console Game Glass Effects" /><figcaption>Console Game Glass Effects<figcaption></figure></p>
<h2><a id="3-problem" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Problem</h2>
<p>The glass itself is transparent, and there are two main points that affect the texture of the glass:</p>
<ul>
<li><strong>Reflection</strong>: glass reflects highlights in the environment.</li>
<li><strong>Refraction</strong>: the glass thickness influences its refractive level. The thicker, the greater. Note here: the thickness would not influence the refractive index but the refractive visual effect.<br />
The most difficult part is to figure out the refractive effect. However, in terms of human vision, strong refraction will interrupt the continuity of background. In position with strong refraction effect, things behind can no longer be seen clearly, which will make people feel that 'this area is not completely transparent' .  You can only see a blurring background through the glass.<br />
<figure><img src="media/16690463295788/16691024311154.jpg" alt="" /></figure></li>
</ul>
<p>So I mainly start from this point to simulate the refraction visual effect. In order to improve the rendering performance, I use <strong>MatCap</strong> to sample the environment texture. I have some usage tips at my blog about how to use MatCap. - <a href="MatCap.html">MatCap</a>. You can check it out if you'd like. However, it is very flexible. You can replace PBR's ibl environment and realtime highlights based on your needs.</p>
<h2><a id="4-code" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. Code</h2>
<p>Complete code in C# based Unity3D is at Github.</p>
<h3><a id="4-1-environmental-highlights-reflection" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.1 Environmental Highlights Reflection</h3>
<p>The reflection part is relatively simple. You can process a glass highlight MatCap texture to handle the highlight reflection of the wine glass. On the left is the direct output of MatCap, and on the right is the output of MatCap as alpha.<br />
<figure><img src="media/16690463295788/16691074450696.jpg" alt="" /></figure></p>
<pre class="line-numbers"><code class="language-c#">_SpColor(&quot;Sp Color&quot;, Color) = (1.0,1.0,1.0,1.0)
// make a texture for highlight part to control the reflection visual effect
float3 spmatCap= tex2D(_CapTex,matCapuv);
spmatCap *=_SpColor.rgb

o.color.rgb = spmatCap;
o.color.a = spmatCap.r;
</code></pre>
<h3><a id="4-2-glass-refractionrefraction" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.2 Glass RefractionRefraction</h3>
<h4><a id="4-2-1-glass-refraction-mask" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.2.1. Glass refraction MASK</h4>
<p>Before making refraction effects, first we need to calculate the range of refraction and determine the refraction area where refraction needs to be used.</p>
<h5><a id="a-the-thickness-range-of-the-glass-itself" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>A. The thickness range of the glass itself</h5>
<ul>
<li>We need to pre-process the glass thickness of the glass itself. For example, the bottom of the cup and the mouth of the glass.<br />
The thickness here can be stored in 2 ways for output:</li>
<li>Preprocess a thickness texture.</li>
<li>Output by painting to a vertex color.</li>
</ul>
<pre class="line-numbers"><code class="language-c#">float3 thicknessTex= tex2D(_MaskTex, i.uv);
float sThickness = thicknessTex.r * i.color.r; //Solid glass part of the cup
</code></pre>
<p>I store the texture in the R channel, and the other channels can be left for later.<br />
In this way we can get a manually controllable thickness range.<br />
<figure><img src="media/16690463295788/16691076730180.jpg" alt="" /></figure></p>
<h5><a id="b-glass-side-thickness" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>B. Glass side thickness</h5>
<p>The edge part is calculated here using Finier.</p>
<pre class="line-numbers"><code class="language-c#">_FenierEdge(&quot;Fenier Range&quot;, Range(-2, 2)) = 0.0
_FenierIntensity(&quot;Fenier intensity&quot;, Range(0, 10)) = 2.0
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
float3 V = normalize(_WorldSpaceCameraPos - i.worldPos);
float NoV = dot(N,V);

float EdgeThickness (in float NoV)
{
   float ET = saturate((NoV-_FenierEdge)*_FenierIntensity);
   return ET;
}
</code></pre>
<p>By adjusting the parameters we can get the edge range of the cup.<br />
<figure><img src="media/16690463295788/16691077191650.jpg" alt="" /></figure></p>
<p>Finally, combining the two ranges together, we get the complete glass refraction area.<br />
<figure><img src="media/16690463295788/16691077301576.jpg" alt="" /></figure></p>
<pre class="line-numbers"><code class="language-c#">_FenierEdge(&quot;FenierRange&quot;, Range(-2, 2)) = 0.0
_FenierIntensity(&quot;Fenierintensity&quot;, Range(0, 10)) = 2.0
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
float3 V = normalize(_WorldSpaceCameraPos - i.worldPos);
float NoV = dot(N,V);
float3 thicknessTex= tex2D(_MaskTex, i.uv) ;
float sThickness = thicknessTex.r * i.color.r; //Solid glass part of the cup
float fThickness = thicknessTex.g;// Thickness of cup Fenir

float EdgeThickness (in float NoV ,in float eThickness )
{
   fThickness = (eThickness -0.5)*0.5;
   float ET = saturate((NoV-_FenierEdge+fThickness)*_FenierIntensity);
   return 1-ET*eThickness ;
}
</code></pre>
<h4><a id="4-2-2-simulate-glass-refraction" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.2.2. Simulate glass refraction</h4>
<p>We need to use MatCap with a new UV sampling to simulate glass refraction, because we need to use the refraction mask obtained above to distort this MatCap texture.<br />
However, you can use the same MatCap texture as the highlight, or you can create a new one separately. I am lazy and use the same one for the highlight</p>
<p><figure><img src="media/16690463295788/16691077670951.jpg" alt="" /></figure></p>
<pre class="line-numbers"><code class="language-c#">float Refintensity = Thickness*_Refintensity;
float3 rfmatCap = tex2D(_RfCapTex,matCapuv+Refintensity);
float3 rfmatColor= RFLerpColor(rfmatCap,Thickness) 
</code></pre>
<pre class="line-numbers"><code class="language-c#">// Add a custom color parameter to _BaseColor 
// then you can control the glass body color
float3 RFLerpColor (in float3 rfmatCap,in float Thickness)
{
	float3 c1 = _BaseColor.rgb*0.5;
	float3 c2 = rfmatCap*_BaseColor.rgb;
	float cMask = Thickness;
    Return lerp(c1,c2,cMask ); 
    // Here you can also *v.color.rgb to control the local color of the glass with the vertex color to create a stained glass effect
}
</code></pre>
<p>After simulating glass refraction, we need to output the refraction MASK we made before  as alpha, and the whole refraction part is finished.<br />
<figure><img src="media/16690463295788/16691078038152.jpg" alt="" /></figure></p>
<p>Finally, the reflection and refraction are combined to output the whole effect. We are basically done on this part.<br />
<figure><img src="media/16690463295788/16691078152738.jpg" alt="" /></figure></p>
<pre class="line-numbers"><code class="language-c#">float alpha = saturate(max(spmatCap.r*_SpColor.a ,Thickness)*_BaseColor.a);
//_SpColor is a separate color control for highlight colors
// The alpha calculation here is for that the transparency of the highlights can be controlled separately, as well as the transparency of the overall cup
col.rgb = rfColor+spColor; //combine reflection and refraction
col.a = alpha;
</code></pre>
<h4><a id="4-2-3-add-normal-details" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>4.2.3. Add normal details</h4>
<p>Because the accuracy of the model in the game is relatively low, in order to improve the surface details, we can also add a normal map. This allows for richer representations.</p>
<p>Because the above refraction MASK and MatCap mapping are calculated based on N (normal). So here we only need to calculate the normalMap.<br />
<figure><img src="media/16690463295788/16691078453811.jpg" alt="" /></figure></p>
<pre class="line-numbers"><code class="language-c#">o.worldTangent =normalize(UnityObjectToWorldNormal(v.tangent));
o.worldBinormal = cross(o.worldNorm, o.worldTangent) * v.tangent.w;   
o.uv.zw = TRANSFORM_TEX(v.texcoord.xy,_NormalTex) ; //(give the normals separate UVs so that you can use detail normals.
You can also use multiple sets of normal textures to blend)
o.uv.xy = TRANSFORM_TEX(v.texcoord.xy,_MaskTex) ;
//------↑VSout----------------------------------------------------------------------------------------------

void GetNormal(v2f I, inout float3 N)
{
	float4 normalTex = tex2D(_NormalTex, i.uv.zw);
	float3 normalTS = normalize(UnpackNormal(normalTex));
	float3x3 tbn = float3x3(i.worldTangent, i.worldBinormal, i.worldNorm);
	N = normalize(mul(normalTS, tbn));
}
</code></pre>
<p>PS. If you need a more realistic visual effect, you can use an RT to create the effect of the objects behind being refracted and distorted, but in fact, you don't need to add it at all.<br />
Now we are done our job on realizing glass material. I will discuss more about its usages and give some its application examples in Discussion Part.</p>
<h2><a id="5-results" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>5. Results</h2>
<p>All the effect pictures are real-time screenshots in Unity3D, no Tone mapping.<br />
<figure><img src="media/16690463295788/16690910660905.jpg" alt="" /></figure><br />
<figure><img src="media/16690463295788/16690911545749.jpg" alt="" /></figure></p>
<p><figure><img src="media/16690463295788/champagne.gif" alt="champagne" /><figcaption>champagne<figcaption></figure><br />
<figure><img src="media/16690463295788/beer.gif" alt="beer" /><figcaption>beer<figcaption></figure></p>
<h2><a id="6-discussion-more-advanced-usages-about-glass-material" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6. Discussion: More advanced usages about glass material</h2>
<h3><a id="6-1-frosted-glass" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.1 Frosted glass</h3>
<p>In fact, frosted glass is very, very simple under MatCap, we only need to take the texture of MatCap into Photoshop for blurring.<br />
If it is IBL, Phone, GGX and other high-light reflections, it can be processed directly according to the roughness method.<br />
<figure><img src="media/16690463295788/16691079921428.jpg" alt="" /></figure></p>
<h3><a id="6-2-multiple-layers-of-glass-and-liquids" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.2 Multiple layers of glass and liquids</h3>
<ul>
<li>Now I have only done the outer surface of the cup, and the inside of the glass has not been processed yet.</li>
<li>Take a look at the cup model first, here are some points to note.</li>
<li>I divided the cup model into 3 parts:
<ul>
<li>Cup exterior</li>
<li>Cup inner wall</li>
<li>Liquid in a glass</li>
</ul>
</li>
<li>The reason for distinguishing the inner and outer walls is mainly to solve the problem of wrong front-back relationship caused by translucent sorting.<br />
<figure><img src="media/16690463295788/16691080601660.jpg" alt="" /></figure><br />
Here we create a new shader, or we can copy a copy of the previous outer wall shader and assign it to the inner wall model of the cup.<br />
<figure><img src="media/16690463295788/16691080711770.jpg" alt="" /></figure><br />
Inner wall material: It is recommended to adjust the parameters to remove the edge thickness, unless you are making a double-layer glass. The bottom part of the cup is controlled by the thickness mask (texture and vertex color are fine).</li>
</ul>
<h4><a id="6-2-1-add-liquid-material" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.2.1 Add liquid material</h4>
<p>Create a new liquid shader in the same way. Modify the color to make water, beer, red wine or other beverages.<br />
<figure><img src="media/16690463295788/16691081216596.jpg" alt="" /></figure><br />
Here, the thickness mask map texture is replaced with a small bubble texture. Used to simulate small bubbles in beer.<br />
<figure><img src="media/16690463295788/16691081310410.jpg" alt="" /></figure><br />
At the same time, use animation to sample K keyframes for this texture, and add an animation of UV flow. You can make the effect of beer bubbles flowing.<br />
<figure><img src="media/16690463295788/16691081423985.jpg" alt="" /></figure></p>
<h4><a id="6-2-2-about-render-hierarchy" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.2.2 About Render Hierarchy</h4>
<p><figure><img src="media/16690463295788/16691081559295.jpg" alt="" /></figure></p>
<p><strong>Translucent material --- needs to modify the RenderQueue of the internal shader to -1 on the parameters of the external material. Otherwise, the context of the depth will be wrong at certain angles or complex models.</strong></p>
<p>For example: the beer glasses above are rendered in the same order as the <strong>RenderQueue</strong>.</p>
<p>Cup exterior (3000) ← cup liquid (2999) ← cup interior (2998)<br />
<strong>Translucent part</strong>: In fact, just arrange them in the order we see them. Because when we see the whole cup, we first see the outer wall, followed by the liquid part, and finally the inner wall part. The smaller the value, the higher the rendering priority.</p>
<h3><a id="6-3-glass-with-cracked-ice-effect" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.3 Glass with cracked ice effect</h3>
<p>Use a cracked texture with a vertex color to paint the base thickness of the glass. It can simulate the effect similar to cracked glass.<br />
<figure><img src="media/16690463295788/16691082062343.jpg" alt="" /></figure></p>
<h4><a id="6-3-1-about-the-adaptation-of-pbr-dynamic-environment" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>6.3.1 About the Adaptation of PBR Dynamic Environment</h4>
<p>You can mix low-profile colors such as the ball association lighting and LightProbes of the environment with the refraction part, and it can change with the change of the environment color.</p>
<h2><a id="7-caveats" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>7. Caveats</h2>
<ul>
<li>This is not an academic article.</li>
<li>The author guarantee that the implementation has no complicated algorithms, no ray tracing, the solution could be without RT, without post-processing.</li>
<li>This solution is mainly from the visual aspects to achieve the final effect.</li>
<li>I love to help if you have any other question, idea or problem.</li>
</ul>
<h2><a id="8-references-tutorials" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>8. References &amp; Tutorials</h2>
<p>Youtube MATCAP textures. <a href="https://www.youtube.com/watch?v=Yg5ULaS2jMk">https://www.youtube.com/watch?v=Yg5ULaS2jMk</a><br />
Unity MatCap Tutorials. <a href="http://wiki.unity3d.com/index.php/MatCap">http://wiki.unity3d.com/index.php/MatCap</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">05/05/2022</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Portfolios.html'>Portfolios</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="Photoshop_Layer_Normalization_Tool.html">
                
                  <h1>Photoshop Layer Normalization Tool</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2><a id="about" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>About</h2>
<ul>
<li>This tool is designed for automating merge layers to normalize *<em>.psd</em> file</li>
<li>It is also a supportive tool designed for <strong>PSD2UMG</strong> plugin</li>
</ul>
<h2><a id="purpose" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Purpose</h2>
<ul>
<li>The widget trees of Game Engine (UE4 Engine/Unity3D Engine) do not map well with Photoshop file layers, some of PSD features (e.g. the layer set, the mask, and the layer FX) cannot be imported to Game Engine directly.</li>
<li>The tool could merge some group patterns in *<em>.psd</em> into a single layer, in order to eliminate the features that Game Engine do not support.</li>
<li>Of course, you could merge these groups manually. That's way too tedious!</li>
</ul>
<h2><a id="feature" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Feature</h2>
<ul>
<li>Currently the tool supports merge the following patterns:
<ul>
<li>layers with layer pattern</li>
<li>layers with clipping mask</li>
<li>layers with mask</li>
<li>layer patterns with layer set</li>
<li>layer set with mask</li>
<li>empty layer / empty textblock / empty group / empty layer set</li>
<li>layer set naming with prefix &quot;merge&quot;</li>
</ul>
</li>
<li>Note:
<ul>
<li>The source file wouldn't be changed.</li>
<li>The tool duplicates the source file and generates a new file naming with postfix &quot;_norm&quot;.</li>
<li>You will be asked to save normalized new file in somewhere you like.</li>
</ul>
</li>
</ul>
<h2><a id="installation-usage" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation &amp; Usage</h2>
<ol>
<li>Install Photoshop CC(or higher version)</li>
<li>git clone <a href="https://github.com/RadiumLZhang/Photoshop-Layer-Normalization-Tool.git">https://github.com/RadiumLZhang/Photoshop-Layer-Normalization-Tool.git</a></li>
<li>double click <em>Install.cmd</em></li>
<li>Restart Photoshop CC</li>
<li>Top Menu Bar -&gt; File -&gt; Auto -&gt; Normalize for PSD2UI</li>
</ol>
<h2><a id="license" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>
<p>This project is licensed under the terms of the MIT license.</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">11/18/2022</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Portfolios.html'>Portfolios</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="Free_Casonry.html">
                
                  <h1>Free Casonry</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2><a id="about" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>About</h2>
<ul>
<li>This is an independent, narrative and storytelling management mobile game based on Unity3D Engine.</li>
<li>Complete code in C# based Unity3D is at <a href="https://github.com/RadiumLZhang/Free-Casonry">Github</a>.</li>
</ul>
<h2><a id="overview" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h2>
<p>Players take on the role of cats and run the Cat Masons. The cats will conspire in the ancient European court to try to overthrow the human regime.</p>
<h2><a id="design-summary" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Design Summary</h2>
<p>If you are interested in details, please check out <a href="https://radiumlzhang.github.io/Free_Casonry_Design_Summary.pdf">Free Casonry Design Summary</a> here.</p>
<h2><a id="prize" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prize</h2>
<img src="media/16682488882823/16691058454114.jpg" alt="drawing" style="width:75px;"/>
<ul>
<li>Tencent Minigame Project Gold Award, 2021.</li>
<li>Tencent Minigame Best Art Award, 2021.</li>
</ul>
<h2><a id="demos" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Demos</h2>
<p><a href="https://youtu.be/c19cobOFF7Y"><figure><img src="https://img.youtube.com/vi/c19cobOFF7Y/maxresdefault.jpg" alt="Video Demo" /><figcaption>Video Demo<figcaption></figure></a></p>
<hr />
<p><figure><img src="media/16682488882823/1.gif" alt="" /></figure><figure><img src="media/16682488882823/2.gif" alt="" /></figure><figure><img src="media/16682488882823/3.gif" alt="" /></figure><figure><img src="media/16682488882823/4.gif" alt="" /></figure><figure><img src="media/16682488882823/5.gif" alt="" /></figure><figure><img src="media/16682488882823/6.gif" alt="" /></figure><figure><img src="media/16682488882823/7.gif" alt="" /></figure><figure><img src="media/16682488882823/8.gif" alt="" /></figure><figure><img src="media/16682488882823/9.gif" alt="" /></figure></p>
<h2><a id="installation" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>
<p><a href="https://github.com/RadiumLZhang/CatClub/releases/tag/v1.0.0">Release Version 1.0.0</a></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">11/15/2021</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Portfolios.html'>Portfolios</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="https://raw.githubusercontent.com/RadiumLZhang/RadiumLZhang.github.io/main/profile/20221024203511.jpg" /></div>
            
                <h1>Radium's Website</h1>
                <div class="site-des"></div>
                <div class="social">



<a target="_blank" class="linkedin" href="https://www.linkedin.com/in/lei-zhang-19140715a/" title="LinkedIn">LinkedIn</a>





<a target="_blank" class="github" target="_blank" href="https://github.com/RadiumLZhang" title="GitHub">GitHub</a>

  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="Portfolios.html"><strong>Portfolios</strong></a>
        
            <a href="Literature%20Reviews.html"><strong>Literature Reviews</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="PSD2UMG.html">PSD2UMG</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="Realtime_Glass_Rendering.html">Realtime Glass Rendering</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="Photoshop_Layer_Normalization_Tool.html">Photoshop Layer Normalization Tool</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="Free_Casonry.html">Free Casonry</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="16691702731499.html">A virtual reality game for cognitive impairment screening in elderly: a user perspective</a>
			      </li>
		     
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>



  














<style type="text/css">
figure{margin: 0;padding: 0;}
figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>



  </body>
</html>
